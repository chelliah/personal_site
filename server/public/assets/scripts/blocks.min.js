function setup(){modifiedHeight=displayHeight,canvas=createCanvas(windowWidth,windowHeight),canvas.position(0,0),canvas["class"]("blocks"),canvas.parent("animation-container"),colorMode(HSB,100),bgColor=color(192,2,95,30),initialize(Math.round(.8*windowWidth),100,25)}function draw(){background(bgColor),cubes.drawBottom(),staticCubes.drawStatic(),cubes.drawTop()}function windowResized(){resizeCanvas(windowWidth,windowHeight),initialize(Math.round(.8*windowWidth),100,25)}function mouseWheel(i){console.log("scrollin");for(var t=i.deltaY,s=0;s<cubes.cubes.length;s++)cubes.cubes[s].position.y+=t/20}function touchMoved(){console.log("scrollin");for(var i=touchY-ptouchY,t=0;t<cubes.cubes.length;t++)cubes.cubes[t].position.y+=i}function initialize(i,t,s){cubes=new Cubes(i,t,s);for(var o=windowHeight;o+s>0;)cubes.addCube(i,o,t,s),o-=4*s;staticCubes=new Cubes(i,t,s),staticCubes["static"]=!0,startingHeight=Math.round(windowHeight/2)+3*s;for(var h=0;6>h;h++)staticCubes.addCube(i,startingHeight,t,s),startingHeight-=s}var cubes,staticCubes,step=0,startingHeight,canvas,bgColor,modifiedHeight,Cube=function(i,t,s,o){return this.cubeWidth=s,this.depth=o,this.position={},this.position.x=i,this.position.y=t,this.fill=fill,this};Cube.prototype.display=function(){var i=143,t=190,s=t-i,o=this.position.y/windowHeight,h=(windowHeight+110-this.position.y)/(windowHeight+110),e=i+Math.round(s*o),n=Math.round(53*o*1.5),u=100*Math.min(o*o,h*h);stroke(e,n,24,u),fill(e,n,74,u),quad(this.position.x,this.position.y,this.position.x+this.cubeWidth,this.position.y+this.depth,this.position.x+2*this.cubeWidth,this.position.y,this.position.x+this.cubeWidth,this.position.y-this.depth),fill(e,n,54,u),quad(this.position.x,this.position.y,this.position.x+this.cubeWidth,this.position.y+this.depth,this.position.x+this.cubeWidth,this.position.y+2*this.depth,this.position.x,this.position.y+this.depth),fill(e,n,44,u),quad(this.position.x+this.cubeWidth,this.position.y+2*this.depth,this.position.x+this.cubeWidth,this.position.y+this.depth,this.position.x+2*this.cubeWidth,this.position.y,this.position.x+2*this.cubeWidth,this.position.y+this.depth)};var Cubes=function(i,t,s){this.cubes=[],this.startingX=i,this.width=t,this.depth=s};Cubes.prototype.addCube=function(i,t,s,o){this.cubes.push(new Cube(i,t,s,o))},Cubes.prototype.getPerimiter=function(){this.topCube=this.cubes[this.cubes.length-1],this.bottomCube=this.cubes[0],this.bottomCube.position.y-this.depth>windowHeight&&(this.cubes.shift(),this.cubes.push(new Cube(this.startingX,0-2*this.depth,this.width,this.depth))),this.topCube.position.y+2*this.depth<0&&(this.cubes.pop(),this.cubes.unshift(new Cube(this.startingX,windowHeight+this.depth,this.width,this.depth)))},Cubes.prototype.drawTop=function(){this.getPerimiter();for(var i=0;i<this.cubes.length;i++){var t=this.cubes[i];t.position.y<startingHeight+this.depth&&t.display()}},Cubes.prototype.drawStatic=function(){for(var i=0;i<this.cubes.length;i++){var t=this.cubes[i];t.display()}},Cubes.prototype.drawBottom=function(){this.getPerimiter();for(var i=0;i<this.cubes.length;i++){var t=this.cubes[i];t.position.y>startingHeight+6*this.depth&&t.display()}};